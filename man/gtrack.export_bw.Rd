% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/track-export.R
\name{gtrack.export_bw}
\alias{gtrack.export_bw}
\title{Export Track to BigWig Format}
\usage{
gtrack.export_bw(
  track,
  file,
  intervals = get("ALLGENOME", envir = .misha),
  iterator = NULL,
  chrom_sizes = NULL,
  na_value = NULL,
  fixed_summaries = FALSE
)
}
\arguments{
\item{track}{Track name or track expression to export. Can be a regular track name,
a virtual track (e.g., "gc", "pwm.max"), or a track expression (e.g., "track1 + track2").}

\item{file}{Output BigWig file path. Should end in .bw or .bigWig.}

\item{intervals}{Genomic intervals to export. Default is ALLGENOME (entire genome).}

\item{iterator}{Iterator for computing track values. Can be:
\itemize{
  \item Numeric: bin size in base pairs (e.g., \code{iterator = 1000} for 1kb bins)
  \item Character: track name to use as iterator intervals
  \item data.frame: explicit intervals to use as iterator
  \item NULL (default): use track's native resolution
}}

\item{chrom_sizes}{Named numeric vector of chromosome sizes. If NULL (default),
chromosome sizes are automatically extracted from ALLGENOME.}

\item{na_value}{How to handle NaN/NA values (BigWig format doesn't support them):
\itemize{
  \item NULL (default): Remove intervals with NaN/NA values
  \item numeric: Replace NaN/NA values with this value (e.g., \code{na_value = 0})
}}

\item{fixed_summaries}{Logical. If TRUE, compute summaries at fixed Ensembl-style zoom
levels (30X, 65X, 130X, 260X, 450X, 648X, 950X, 1296X, 4800X, 19200X). If FALSE (default),
zoom levels are dynamically determined based on data characteristics. Fixed summaries
may be preferable for consistent visualization across different genome browsers.}
}
\value{
Invisibly returns the file path (useful for piping).
}
\description{
Exports a misha track to BigWig format. Works with dense tracks, sparse tracks,
virtual tracks, and track expressions.
}
\details{
BigWig format does not support missing values (NaN/NA). By default (\code{na_value=NULL}),
intervals with NaN values are removed from the export. Alternatively, set \code{na_value}
to a numeric value (e.g., 0) to replace NaN with that value instead of removing the intervals.

This function requires the \pkg{rtracklayer} package from Bioconductor. Install it with:
\code{BiocManager::install("rtracklayer")}

The function uses \code{\link{gextract}} internally, which provides a unified interface
for extracting data from all track types (dense, sparse, virtual, expressions). The
\code{iterator} parameter is particularly useful for:
\itemize{
  \item Reducing output file size by binning high-resolution tracks
  \item Computing track expressions in fixed-size windows
  \item Exporting virtual tracks (which require an iterator to be evaluated)
}
}
\examples{
\dontrun{
# Export entire track at native resolution
gtrack.export_bw("my.track", "output.bw")

# Export track binned at 1kb resolution
gtrack.export_bw("my.track", "output_1kb.bw", iterator = 1000)

# Export virtual track (GC content in 500bp windows)
gtrack.export_bw("gc", "gc_content.bw", iterator = 500)

# Export track expression
gtrack.export_bw("track1 + track2", "combined.bw", iterator = 1000)

# Export specific chromosomes
gtrack.export_bw("my.track", "chr1.bw", intervals = gintervals(1))

# Replace NaN values with 0 instead of removing them
gtrack.export_bw("coverage.track", "coverage.bw", na_value = 0, iterator = 100)

# Use fixed Ensembl-style zoom levels for consistent browser visualization
gtrack.export_bw("my.track", "output.bw", fixed_summaries = TRUE)
}

}
\seealso{
\code{\link{gtrack.import}} for importing tracks including BigWig files,
  \code{\link{gextract}} for extracting track data
}
